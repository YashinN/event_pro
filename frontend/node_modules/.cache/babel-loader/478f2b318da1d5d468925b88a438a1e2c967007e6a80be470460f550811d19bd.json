{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyEventCard=function MyEventCard(props){// sets loading state for api call.\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];// request to remove user event\nvar delMyEventRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);//  removes event from user events , sends email as identifier and event id.\n_context.prev=1;_context.next=4;return fetch(process.env.REACT_APP_MYEVENTS+props.user.email,{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(props.user.token)},body:JSON.stringify({id:props.event._id})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;// if response ok updates user event states with new data.\nif(response.ok){setLoading(null);// updates user events state\nprops.setMyEvents(data);// opens success message model.\nprops.openModal();}setLoading(null);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 15:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function delMyEventRequest(){return _ref.apply(this,arguments);};}();// makes delete request on click.\nvar handleDel=function handleDel(){delMyEventRequest();};return/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container event-card px-0 \".concat(props.colour),children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-primary mark-btn btn\",onClick:handleDel,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border \",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}):\"Remove\"}),/*#__PURE__*/_jsx(\"img\",{src:props.event.image,alt:\"\",className:\"event-card-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\" p-3 \",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2\",children:props.event.description}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Date:\",props.event.date]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Venue:\",props.event.venue]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Time:\",props.event.startTime,\" - \",props.event.endTime]})]})]})});};export default MyEventCard;","map":{"version":3,"names":["useState","jsx","_jsx","jsxs","_jsxs","MyEventCard","props","_useState","_useState2","_slicedToArray","loading","setLoading","delMyEventRequest","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","process","env","REACT_APP_MYEVENTS","user","email","method","headers","Authorization","concat","token","body","JSON","stringify","id","event","_id","sent","json","ok","setMyEvents","openModal","t0","console","log","stop","apply","arguments","handleDel","className","children","colour","type","onClick","role","src","image","alt","description","date","venue","startTime","endTime"],"sources":["/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/src/components/MyEventCard.js"],"sourcesContent":["import { useState } from \"react\";\n\nconst MyEventCard = (props) => {\n  // sets loading state for api call.\n  const [loading, setLoading] = useState(null);\n\n  // request to remove user event\n  const delMyEventRequest = async () => {\n    setLoading(true);\n    //  removes event from user events , sends email as identifier and event id.\n    try {\n      const response = await fetch(\n        process.env.REACT_APP_MYEVENTS + props.user.email,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${props.user.token}`,\n          },\n          body: JSON.stringify({ id: props.event._id }),\n        }\n      );\n\n      // recevies update list of user events.\n      const data = await response.json();\n\n      // if response ok updates user event states with new data.\n      if (response.ok) {\n        setLoading(null);\n        // updates user events state\n        props.setMyEvents(data);\n        // opens success message model.\n        props.openModal();\n      }\n      setLoading(null);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  // makes delete request on click.\n  const handleDel = () => {\n    delMyEventRequest();\n  };\n\n  return (\n    <div className=\"col-12\">\n      <div className={`container event-card px-0 ${props.colour}`}>\n        <button\n          type=\"button\"\n          className=\"btn btn-outline-primary mark-btn btn\"\n          onClick={handleDel}\n        >\n          {loading ? (\n            <div className=\"loading-container\">\n              <div className=\"spinner-border \" role=\"status\">\n                <span className=\"visually-hidden\">Loading...</span>\n              </div>\n            </div>\n          ) : (\n            \"Remove\"\n          )}\n        </button>\n\n        <img src={props.event.image} alt=\"\" className=\"event-card-img\" />\n\n        <div className=\" p-3 \">\n          <h5 className=\"mb-2\">{props.event.description}</h5>\n          <h5 className=\"mb-2\">Date:{props.event.date}</h5>\n          <h5 className=\"mb-2\">Venue:{props.event.venue}</h5>\n          <h5 className=\"mb-2\">\n            Time:{props.event.startTime} - {props.event.endTime}\n          </h5>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MyEventCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}