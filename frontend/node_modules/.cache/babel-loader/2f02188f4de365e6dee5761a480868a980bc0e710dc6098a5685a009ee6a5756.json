{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";// modal component\nimport MessageModal from\"./MessageModal\";// component css\nimport\"./EventCard.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EventCard=function EventCard(props){// toggles state to show message modal\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];// sets loading state when making api calls.\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// request to server to save and event to My events or user events.\nvar saveRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// sets loading state while waiting for response.\nsetLoading(true);// makes request with user email as identifier in req params\n// sends event id to derver in body.\n_context.next=3;return fetch(process.env.REACT_APP_MYEVENTS+props.isUser.email,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(props.isUser.token)},body:JSON.stringify({id:props.event._id})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;// if successful response\nif(response.ok){// toggles off loading state.\nsetLoading(null);// stores recevied user events\n// props.setIsUser(data);\nprops.setMyEvents(data.allUserEvents);openModal();}setLoading(null);case 9:case\"end\":return _context.stop();}},_callee);}));return function saveRequest(){return _ref.apply(this,arguments);};}();// onclick request to save user event.\nvar handleSave=function handleSave(){saveRequest();};// opens message modal on successful save\nvar openModal=function openModal(){setShowModal(true);};// closes message modal on click.\nvar closeModal=function closeModal(){setShowModal(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6 col-lg-6 col-xl-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container event-card px-0 \".concat(props.colour),children:[props.isUser&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-primary mark-btn btn\",onClick:handleSave,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})}):\"Save\"}),/*#__PURE__*/_jsx(\"img\",{src:props.event.image,alt:\"\",className:\"event-card-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\" p-3 \",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2\",children:props.event.description}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Date:\",props.event.date]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Venue:\",props.event.venue]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Time:\",props.event.startTime,\" - \",props.event.endTime]})]})]}),/*#__PURE__*/_jsx(MessageModal,{showModal:showModal,closeModal:closeModal,message:\"Event has been saved!\"})]});};export default EventCard;","map":{"version":3,"names":["useState","MessageModal","jsx","_jsx","jsxs","_jsxs","EventCard","props","_useState","_useState2","_slicedToArray","showModal","setShowModal","_useState3","_useState4","loading","setLoading","saveRequest","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","process","env","REACT_APP_MYEVENTS","isUser","email","method","headers","Authorization","concat","token","body","JSON","stringify","id","event","_id","sent","json","ok","setMyEvents","allUserEvents","openModal","stop","apply","arguments","handleSave","closeModal","className","children","colour","type","onClick","role","src","image","alt","description","date","venue","startTime","endTime","message"],"sources":["/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/src/components/EventCard.js"],"sourcesContent":["import { useState } from \"react\";\n// modal component\nimport MessageModal from \"./MessageModal\";\n// component css\nimport \"./EventCard.css\";\n\nconst EventCard = (props) => {\n  // toggles state to show message modal\n  const [showModal, setShowModal] = useState(false);\n  // sets loading state when making api calls.\n  const [loading, setLoading] = useState(null);\n\n  // request to server to save and event to My events or user events.\n  const saveRequest = async () => {\n    // sets loading state while waiting for response.\n    setLoading(true);\n    // makes request with user email as identifier in req params\n    // sends event id to derver in body.\n    const response = await fetch(\n      process.env.REACT_APP_MYEVENTS + props.isUser.email,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${props.isUser.token}`,\n        },\n        body: JSON.stringify({ id: props.event._id }),\n      }\n    );\n\n    // recevies user saved event data from server\n    const data = await response.json();\n\n    // if successful response\n    if (response.ok) {\n      // toggles off loading state.\n      setLoading(null);\n      // stores recevied user events\n      // props.setIsUser(data);\n      props.setMyEvents(data.allUserEvents);\n\n      openModal();\n    }\n    setLoading(null);\n  };\n\n  // onclick request to save user event.\n  const handleSave = () => {\n    saveRequest();\n  };\n\n  // opens message modal on successful save\n  const openModal = () => {\n    setShowModal(true);\n  };\n\n  // closes message modal on click.\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  return (\n    <div className=\"col-12 col-md-6 col-lg-6 col-xl-4\">\n      <div className={`container event-card px-0 ${props.colour}`}>\n        {props.isUser && (\n          <button\n            type=\"button\"\n            className=\"btn btn-outline-primary mark-btn btn\"\n            onClick={handleSave}\n          >\n            {loading ? (\n              <div className=\"loading-container\">\n                <div className=\"spinner-border\" role=\"status\">\n                  <span className=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            ) : (\n              \"Save\"\n            )}\n          </button>\n        )}\n\n        <img src={props.event.image} alt=\"\" className=\"event-card-img\" />\n\n        <div className=\" p-3 \">\n          <h5 className=\"mb-2\">{props.event.description}</h5>\n          <h5 className=\"mb-2\">Date:{props.event.date}</h5>\n          <h5 className=\"mb-2\">Venue:{props.event.venue}</h5>\n          <h5 className=\"mb-2\">\n            Time:{props.event.startTime} - {props.event.endTime}\n          </h5>\n        </div>\n      </div>\n      <MessageModal\n        showModal={showModal}\n        closeModal={closeModal}\n        message={\"Event has been saved!\"}\n      />\n    </div>\n  );\n};\n\nexport default EventCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}