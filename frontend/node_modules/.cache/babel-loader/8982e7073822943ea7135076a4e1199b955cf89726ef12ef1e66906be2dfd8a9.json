{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import EditEventModal from\"./EditEventModal\";import\"./EditEventCard.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditEventCard=function EditEventCard(props){// State to open/close message modal\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];// State to store loading state while making api calls.\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// function toggles state to open message modal\nvar openModal=function openModal(){setShowModal(true);};// function toggles state to close message modal.\nvar closeModal=function closeModal(){setShowModal(false);};// Makes api call to delete a event.\nvar deleteEventRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,eventsFilter;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// sets loading state.\nsetLoading(true);_context.prev=1;_context.next=4;return fetch(process.env.REACT_APP_EVENTS+\"/\"+props.event._id,{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(props.user.token)}});case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;// If respoonse from server successful .\nif(response.ok){setLoading(null);props.openModal();// sets events to new data,\nprops.setEvents(data);// calls prop to filter events by date.\neventsFilter=props.filterDate(Number(props.month),data);// stores the filtered events by month.\nprops.setFilterData(eventsFilter);}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return function deleteEventRequest(){return _ref.apply(this,arguments);};}();// makes request when delete button is clicked.\nvar handleDelete=function handleDelete(){deleteEventRequest();};return/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6 col-lg-6 col-xl-4 test\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container event-card px-0 \".concat(props.colour),children:[/*#__PURE__*/_jsx(\"img\",{src:props.event.image,alt:\"\",className:\"event-card-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\" py-3 px-2\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2\",children:props.event.description}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Date:\",props.event.date]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-2\",children:[\"Venue:\",props.event.venue]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[\"Time:\",props.event.startTime,\" - \",props.event.endTime]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-controls\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger delete-btn \",onClick:handleDelete,children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-2\",children:\"Loading...\"})]}):\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary edit-btn \",onClick:openModal,children:\"Edit\"})]})]}),/*#__PURE__*/_jsx(EditEventModal,{showModal:showModal,closeModal:closeModal,event:props.event,setEvents:props.setEvents,setFilterData:props.setFilterData,filterDate:props.filterDate,month:props.month,user:props.user})]});};export default EditEventCard;","map":{"version":3,"names":["useState","EditEventModal","jsx","_jsx","jsxs","_jsxs","EditEventCard","props","_useState","_useState2","_slicedToArray","showModal","setShowModal","_useState3","_useState4","loading","setLoading","openModal","closeModal","deleteEventRequest","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","eventsFilter","wrap","_callee$","_context","prev","next","fetch","process","env","REACT_APP_EVENTS","event","_id","method","headers","Authorization","concat","user","token","sent","json","ok","setEvents","filterDate","Number","month","setFilterData","t0","console","log","stop","apply","arguments","handleDelete","className","children","colour","src","image","alt","description","date","venue","startTime","endTime","type","onClick","role"],"sources":["/Users/yashin/Documents/GitHub/Codespace/event_pro/frontend/src/components/EditEventCard.js"],"sourcesContent":["import { useState } from \"react\";\nimport EditEventModal from \"./EditEventModal\";\nimport \"./EditEventCard.css\";\n\nconst EditEventCard = (props) => {\n  // State to open/close message modal\n  const [showModal, setShowModal] = useState(false);\n  // State to store loading state while making api calls.\n  const [loading, setLoading] = useState(null);\n\n  // function toggles state to open message modal\n  const openModal = () => {\n    setShowModal(true);\n  };\n\n  // function toggles state to close message modal.\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  // Makes api call to delete a event.\n  const deleteEventRequest = async () => {\n    // sets loading state.\n    setLoading(true);\n\n    try {\n      // makes delete request to server using event id in query.\n      const response = await fetch(\n        process.env.REACT_APP_EVENTS + \"/\" + props.event._id,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${props.user.token}`,\n          },\n        }\n      );\n\n      // gets event data from server.\n      const data = await response.json();\n\n      // If respoonse from server successful .\n      if (response.ok) {\n        setLoading(null);\n        props.openModal();\n        // sets events to new data,\n        props.setEvents(data);\n        // calls prop to filter events by date.\n        const eventsFilter = props.filterDate(Number(props.month), data);\n        // stores the filtered events by month.\n        props.setFilterData(eventsFilter);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  // makes request when delete button is clicked.\n  const handleDelete = () => {\n    deleteEventRequest();\n  };\n\n  return (\n    <div className=\"col-12 col-md-6 col-lg-6 col-xl-4 test\">\n      <div className={`container event-card px-0 ${props.colour}`}>\n        <img src={props.event.image} alt=\"\" className=\"event-card-img\" />\n\n        <div className=\" py-3 px-2\">\n          <h5 className=\"mb-2\">{props.event.description}</h5>\n          <h5 className=\"mb-2\">Date:{props.event.date}</h5>\n          <h5 className=\"mb-2\">Venue:{props.event.venue}</h5>\n          <h5 className=\"mb-0\">\n            Time:{props.event.startTime} - {props.event.endTime}\n          </h5>\n        </div>\n\n        <div className=\"btn-controls\">\n          <button\n            type=\"button\"\n            className=\"btn btn-danger delete-btn \"\n            onClick={handleDelete}\n          >\n            {loading ? (\n              <div className=\"loading-container\">\n                <div className=\"spinner-border\" role=\"status\">\n                  <span className=\"visually-hidden\">Loading...</span>\n                </div>\n                <span className=\"mx-2\">Loading...</span>\n              </div>\n            ) : (\n              \"Delete\"\n            )}\n          </button>\n          <button\n            type=\"button\"\n            className=\"btn btn-primary edit-btn \"\n            onClick={openModal}\n          >\n            Edit\n          </button>\n        </div>\n      </div>\n      <EditEventModal\n        showModal={showModal}\n        closeModal={closeModal}\n        event={props.event}\n        setEvents={props.setEvents}\n        setFilterData={props.setFilterData}\n        filterDate={props.filterDate}\n        month={props.month}\n        user={props.user}\n      />\n    </div>\n  );\n};\n\nexport default EditEventCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}